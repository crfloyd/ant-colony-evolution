<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ant Colony Simulation</title>
  </head>
  <body>
    <div id="app">
      <canvas id="gameCanvas"></canvas>
      <div id="ui">
        <!-- Top Stats Bar -->
        <div class="stats-bar">
          <div class="stat-item">
            <span class="stat-label">Ants</span>
            <span class="stat-value" id="antCount">0</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Food</span>
            <span class="stat-value" id="foodCount">0</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Next Spawn</span>
            <span class="stat-value" id="spawnProgress">0/10</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Time</span>
            <span class="stat-value" id="simTime">0:00</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">FPS</span>
            <span class="stat-value" id="fps">60</span>
          </div>
        </div>

        <!-- Playback Controls (Media Player Style) -->
        <div class="playback-controls">
          <button id="slowBtn" class="control-btn" title="Slow Down">&lt;&lt;</button>
          <button id="pauseBtn" class="control-btn primary" title="Play/Pause">â–¶</button>
          <button id="fastBtn" class="control-btn" title="Speed Up">&gt;&gt;</button>
          <span class="speed-display" id="speedDisplay">1x</span>
        </div>

        <!-- Utility Controls -->
        <div class="utility-controls">
          <button id="metricsBtn" class="util-btn">ðŸ“Š Metrics</button>
          <button id="traitViewBtn" class="util-btn">ðŸ§¬ Traits</button>
          <button id="rockColliderBtn" class="util-btn">ðŸŽ¯ Colliders</button>
          <button id="debugBtn" class="util-btn">ðŸ”§ Debug</button>
        </div>

        <!-- Rock Stats (shown only when debug panel is open) -->
        <div id="rockStats" style="display: none;">
          <div class="rock-stat">
            <span class="rock-label">Large:</span>
            <span class="rock-value" id="largeRockStat">0</span>
          </div>
          <div class="rock-stat">
            <span class="rock-label">Medium:</span>
            <span class="rock-value" id="mediumRockStat">0</span>
          </div>
          <div class="rock-stat">
            <span class="rock-label">Small:</span>
            <span class="rock-value" id="smallRockStat">0</span>
          </div>
        </div>
      </div>
      <div id="metricsPanel" style="display: none;">
        <h3>Colony Metrics</h3>
        <div class="metric"><span class="label">Trips/Hour:</span> <span id="tripsPerHour">0</span></div>
        <div class="metric"><span class="label">Avg Trip Dist:</span> <span id="avgTripDist">0</span></div>
        <div class="metric"><span class="label">Foraging:</span> <span id="foragingPct">0%</span></div>
        <div class="metric"><span class="label">Returning:</span> <span id="returningPct">0%</span></div>
        <div class="metric"><span class="label">Food/Min:</span> <span id="foodPerMin">0</span></div>
      </div>
      <div id="traitPanel" style="display: none;">
        <h3>Evolution Traits</h3>
        <div style="font-size: 0.8em; color: #aaa; margin-bottom: 8px; font-style: italic;">
          Population Averages
        </div>
        <div class="metric"><span class="label">ðŸ”´ Speed:</span> <span id="traitSpeed">1.00x</span> <span id="traitSpeedPct" style="color: #888; font-size: 0.85em;">(0%)</span></div>
        <div class="metric"><span class="label">ðŸ”µ Vision:</span> <span id="traitVision">1.00x</span> <span id="traitVisionPct" style="color: #888; font-size: 0.85em;">(0%)</span></div>
        <div class="metric"><span class="label">ðŸŸ¢ Efficiency:</span> <span id="traitEfficiency">1.00x</span> <span id="traitEfficiencyPct" style="color: #888; font-size: 0.85em;">(0%)</span></div>
        <div class="metric"><span class="label">âš« Carry:</span> <span id="traitCarry">1.00x</span> <span id="traitCarryPct" style="color: #888; font-size: 0.85em;">(0%)</span></div>
        <div style="margin-top: 12px; padding-top: 8px; border-top: 1px solid rgba(200, 100, 255, 0.2); font-size: 0.7em; color: #999; line-height: 1.6;">
          <strong style="color: #ff3333;">Red trail</strong> = High speed<br>
          <strong style="color: #3366ff;">Blue cone</strong> = High vision<br>
          <strong style="color: #33ff33;">Green pulse</strong> = High efficiency<br>
          <strong>Larger size</strong> = High carry<br>
          <span style="font-size: 0.9em; font-style: italic; opacity: 0.7;">Click ant to see traits</span>
        </div>
      </div>
      <div id="antDebugPanel" style="display: none;">
        <h3>Ant Debug Info
          <button id="copyAntDebug" style="float: right; cursor: pointer; margin-left: 8px;">ðŸ“‹</button>
          <button id="closeAntDebug" style="float: right; cursor: pointer;">âœ•</button>
        </h3>
        <div id="antDebugContent"></div>
        <button id="unstuckAntBtn" class="util-btn" style="width: 100%; margin-top: 10px; pointer-events: auto;">ðŸ”„ Trigger Unstuck</button>
      </div>

      <div id="debugPanel" style="display: none;">
        <h3>Rock Distribution</h3>

        <div class="debug-section">
          <h4>Density</h4>
          <div class="debug-control">
            <label>Large: <span id="largeDensityValue">1.0x</span></label>
            <input type="range" id="largeDensitySlider" min="0" max="3" step="0.1" value="1.0">
          </div>
          <div class="debug-control">
            <label>Medium: <span id="mediumDensityValue">1.0x</span></label>
            <input type="range" id="mediumDensitySlider" min="0" max="3" step="0.1" value="1.0">
          </div>
          <div class="debug-control">
            <label>Small: <span id="smallDensityValue">1.0x</span></label>
            <input type="range" id="smallDensitySlider" min="0" max="3" step="0.1" value="1.0">
          </div>
        </div>

        <div class="debug-section">
          <h4>Spread</h4>
          <div class="debug-control">
            <label>Large: <span id="largeSpreadValue">0.8</span></label>
            <input type="range" id="largeSpreadSlider" min="0.5" max="2.0" step="0.1" value="0.8">
          </div>
          <div class="debug-control">
            <label>Medium: <span id="mediumSpreadValue">0.7</span></label>
            <input type="range" id="mediumSpreadSlider" min="0.5" max="2.0" step="0.1" value="0.7">
          </div>
          <div class="debug-control">
            <label>Small: <span id="smallSpreadValue">0.7</span></label>
            <input type="range" id="smallSpreadSlider" min="0.5" max="2.0" step="0.1" value="0.7">
          </div>
        </div>

        <button id="respawnRocksBtn">Respawn Rocks</button>
      </div>
    </div>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
